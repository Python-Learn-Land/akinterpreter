(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3683:function(e,n,t){"use strict";var a=t(5652),s=t.n(a),r=t(8167),o=t.n(r)()(s());o.push([e.id,".react-tabs__tab-list {\n    border-bottom: 1px solid #4a5568;\n    margin: 0 0 10px;\n    padding: 0;\n  }\n  \n  .react-tabs__tab {\n    display: inline-block;\n    border: 1px solid transparent;\n    border-bottom: none;\n    bottom: -1px;\n    position: relative;\n    list-style: none;\n    padding: 6px 12px;\n    cursor: pointer;\n    color: #a0aec0;\n  }\n  \n  .react-tabs__tab--selected {\n    background: #4299e1;\n    border-color: #4a5568;\n    color: white;\n  }\n  \n  .react-tabs__tab:focus {\n    outline: none;\n  }\n  \n  .react-tabs__tab:hover {\n    background: #2d3748;\n  }\n  \n  .react-tabs__tab-panel {\n    display: none;\n  }\n  \n  .react-tabs__tab-panel--selected {\n    display: block;\n  }",""]),n.Z=o},4790:function(e,n,t){Promise.resolve().then(t.bind(t,122))},122:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var a=t(7437),s=t(2265),r=t(7818),o=t(2800),c=t(7022),i=t.n(c),l=t(3394),d=t.n(l),u=t(3514),p=t.n(u),b=t(4970),_=t.n(b),f=t(7793),h=t.n(f),y=t(7528),w=t.n(y),g=t(3683),x={};x.styleTagTransform=w(),x.setAttributes=_(),x.insert=p().bind(null,"head"),x.domAPI=d(),x.insertStyleElement=h(),i()(g.Z,x),g.Z&&g.Z.locals&&g.Z.locals;let m=(0,r.default)(()=>Promise.all([t.e(458),t.e(913)]).then(t.bind(t,9913)),{loadableGenerated:{webpack:()=>[9913]},ssr:!1}),v=(0,r.default)(()=>t.e(259).then(t.bind(t,2259)),{loadableGenerated:{webpack:()=>[2259]},ssr:!1});var k=()=>{let[e,n]=(0,s.useState)(null),[t,r]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{let e=await (0,o.Gg)();n(e);let t=(0,o._I)(e.session_id);t.onmessage=e=>{let t=JSON.parse(e.data);"chat_history"===t.type?n(e=>({...e,chat_history:t.chat_history})):"plan"===t.type?n(e=>({...e,current_plan:t.plan})):"code"===t.type&&n(e=>({...e,step_codes:t.step_codes}))},t.onerror=e=>{console.error("EventSource failed:",e),t.close()}}catch(e){console.error("Failed to fetch session data:",e)}finally{r(!1)}})()},[]);let c=async t=>{if(e)try{await (0,o.F9)(t),n(e=>({...e,current_plan:t}))}catch(e){console.error("Failed to update plan:",e)}},i=async(t,a)=>{if(e)try{let s={...e.step_codes,[t]:a};await (0,o.IX)(s),n(e=>({...e,step_codes:s}))}catch(e){console.error("Failed to update code:",e)}};return t?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen bg-background text-foreground",children:"Loading..."}):e?(0,a.jsxs)("div",{className:"flex h-screen w-full bg-background text-foreground overflow-hidden",children:[(0,a.jsx)("div",{className:"w-1/4 border-r border-border overflow-hidden",children:(0,a.jsx)(m,{initialMessages:e.chat_history})}),(0,a.jsx)("div",{className:"w-3/4 overflow-hidden",children:(0,a.jsx)(v,{currentPlan:e.current_plan,stepCodes:e.step_codes,onPlanUpdate:c,onCodeUpdate:i})})]}):(0,a.jsx)("div",{className:"flex justify-center items-center h-screen bg-background text-foreground",children:"No session data available."})}},2800:function(e,n,t){"use strict";t.d(n,{F9:function(){return f},Gg:function(){return u},IX:function(){return h},MQ:function(){return d},_I:function(){return _},bE:function(){return p},cE:function(){return b}});var a=t(8472),s=t(2649);let r="/api",o="session_id",c=e=>{s.Z.set(o,e,{expires:7})},i=()=>s.Z.get(o)||"",l=async()=>{let e=await a.Z.post("".concat(r,"/sessions"));return c(e.data.session_id),e.data},d=async()=>{let e=i();return e||c(e=(await l()).session_id),e},u=async()=>{let e=await d();return(await a.Z.get("".concat(r,"/sessions/").concat(e))).data},p=async e=>{let n=await d();return(await a.Z.post("".concat(r,"/schat"),{session_id:n,message:e})).data.session_id},b=e=>new EventSource("".concat(r,"/chat-stream?session_id=").concat(e)),_=e=>new EventSource("".concat(r,"/sse?session_id=").concat(e)),f=async e=>{let n=await d();return(await a.Z.put("".concat(r,"/sessions/").concat(n,"/current_plan"),e)).data},h=async e=>{let n=await d();return(await a.Z.put("".concat(r,"/sessions/").concat(n,"/step_codes"),e)).data}}},function(e){e.O(0,[34,971,23,744],function(){return e(e.s=4790)}),_N_E=e.O()}]);