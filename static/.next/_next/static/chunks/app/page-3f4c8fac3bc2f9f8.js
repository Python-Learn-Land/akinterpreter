(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3274:function(e,t,o){Promise.resolve().then(o.bind(o,73029))},73029:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return R}});var a=o(57437),r=o(2265),n=o(57818),c=o(92800);o(71918);var i=o(71322),l=o(41505),s=o(49354);let d=e=>{let{className:t,...o}=e;return(0,a.jsx)(l.eh,{className:(0,s.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...o})},h=l.s_,b=e=>{let{withHandle:t,className:o,...r}=e;return(0,a.jsx)(l.OT,{className:(0,s.cn)("relative flex w-px items-center justify-center bg-slate-200 after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90 dark:bg-slate-800 dark:focus-visible:ring-slate-300",o),...r,children:t&&(0,a.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border border-slate-200 bg-slate-200 dark:border-slate-800 dark:bg-slate-800",children:(0,a.jsx)(i.Z,{className:"h-2.5 w-2.5"})})})};var m=o(4706),u=o(72920),f=o(44839),v=o(57992),w=o(32710),g=o(8362),p=o(87138);let x=(0,r.forwardRef)(function(e,t){return(0,a.jsx)(g.R,{children:(0,a.jsx)(p.default,{...e,ref:t})})}),y={base:["relative isolate inline-flex items-center justify-center gap-x-2 rounded-lg border text-base/6 font-semibold","px-[calc(theme(spacing[3.5])-1px)] py-[calc(theme(spacing[2.5])-1px)] sm:px-[calc(theme(spacing.3)-1px)] sm:py-[calc(theme(spacing[1.5])-1px)] sm:text-sm/6","focus:outline-none data-[focus]:outline data-[focus]:outline-2 data-[focus]:outline-offset-2 data-[focus]:outline-blue-500","data-[disabled]:opacity-50","[&>[data-slot=icon]]:-mx-0.5 [&>[data-slot=icon]]:my-0.5 [&>[data-slot=icon]]:size-5 [&>[data-slot=icon]]:shrink-0 [&>[data-slot=icon]]:text-[--btn-icon] [&>[data-slot=icon]]:sm:my-1 [&>[data-slot=icon]]:sm:size-4 forced-colors:[--btn-icon:ButtonText] forced-colors:data-[hover]:[--btn-icon:ButtonText]"],solid:["border-transparent bg-[--btn-border]","dark:bg-[--btn-bg]","before:absolute before:inset-0 before:-z-10 before:rounded-[calc(theme(borderRadius.lg)-1px)] before:bg-[--btn-bg]","before:shadow","dark:before:hidden","dark:border-white/5","after:absolute after:inset-0 after:-z-10 after:rounded-[calc(theme(borderRadius.lg)-1px)]","after:shadow-[shadow:inset_0_1px_theme(colors.white/15%)]","after:data-[active]:bg-[--btn-hover-overlay] after:data-[hover]:bg-[--btn-hover-overlay]","dark:after:-inset-px dark:after:rounded-lg","before:data-[disabled]:shadow-none after:data-[disabled]:shadow-none"],outline:["border-zinc-950/10 text-zinc-950 data-[active]:bg-zinc-950/[2.5%] data-[hover]:bg-zinc-950/[2.5%]","dark:border-white/15 dark:text-white dark:[--btn-bg:transparent] dark:data-[active]:bg-white/5 dark:data-[hover]:bg-white/5","[--btn-icon:theme(colors.zinc.500)] data-[active]:[--btn-icon:theme(colors.zinc.700)] data-[hover]:[--btn-icon:theme(colors.zinc.700)] dark:data-[active]:[--btn-icon:theme(colors.zinc.400)] dark:data-[hover]:[--btn-icon:theme(colors.zinc.400)]"],plain:["border-transparent text-zinc-950 data-[active]:bg-zinc-950/5 data-[hover]:bg-zinc-950/5","dark:text-white dark:data-[active]:bg-white/10 dark:data-[hover]:bg-white/10","[--btn-icon:theme(colors.zinc.500)] data-[active]:[--btn-icon:theme(colors.zinc.700)] data-[hover]:[--btn-icon:theme(colors.zinc.700)] dark:[--btn-icon:theme(colors.zinc.500)] dark:data-[active]:[--btn-icon:theme(colors.zinc.400)] dark:data-[hover]:[--btn-icon:theme(colors.zinc.400)]"],colors:{"dark/zinc":["text-white [--btn-bg:theme(colors.zinc.900)] [--btn-border:theme(colors.zinc.950/90%)] [--btn-hover-overlay:theme(colors.white/10%)]","dark:text-white dark:[--btn-bg:theme(colors.zinc.600)] dark:[--btn-hover-overlay:theme(colors.white/5%)]","[--btn-icon:theme(colors.zinc.400)] data-[active]:[--btn-icon:theme(colors.zinc.300)] data-[hover]:[--btn-icon:theme(colors.zinc.300)]"],light:["text-zinc-950 [--btn-bg:white] [--btn-border:theme(colors.zinc.950/10%)] [--btn-hover-overlay:theme(colors.zinc.950/2.5%)] data-[active]:[--btn-border:theme(colors.zinc.950/15%)] data-[hover]:[--btn-border:theme(colors.zinc.950/15%)]","dark:text-white dark:[--btn-hover-overlay:theme(colors.white/5%)] dark:[--btn-bg:theme(colors.zinc.800)]","[--btn-icon:theme(colors.zinc.500)] data-[active]:[--btn-icon:theme(colors.zinc.700)] data-[hover]:[--btn-icon:theme(colors.zinc.700)] dark:[--btn-icon:theme(colors.zinc.500)] dark:data-[active]:[--btn-icon:theme(colors.zinc.400)] dark:data-[hover]:[--btn-icon:theme(colors.zinc.400)]"],"dark/white":["text-white [--btn-bg:theme(colors.zinc.900)] [--btn-border:theme(colors.zinc.950/90%)] [--btn-hover-overlay:theme(colors.white/10%)]","dark:text-zinc-950 dark:[--btn-bg:white] dark:[--btn-hover-overlay:theme(colors.zinc.950/5%)]","[--btn-icon:theme(colors.zinc.400)] data-[active]:[--btn-icon:theme(colors.zinc.300)] data-[hover]:[--btn-icon:theme(colors.zinc.300)] dark:[--btn-icon:theme(colors.zinc.500)] dark:data-[active]:[--btn-icon:theme(colors.zinc.400)] dark:data-[hover]:[--btn-icon:theme(colors.zinc.400)]"],dark:["text-white [--btn-bg:theme(colors.zinc.900)] [--btn-border:theme(colors.zinc.950/90%)] [--btn-hover-overlay:theme(colors.white/10%)]","dark:[--btn-hover-overlay:theme(colors.white/5%)] dark:[--btn-bg:theme(colors.zinc.800)]","[--btn-icon:theme(colors.zinc.400)] data-[active]:[--btn-icon:theme(colors.zinc.300)] data-[hover]:[--btn-icon:theme(colors.zinc.300)]"],white:["text-zinc-950 [--btn-bg:white] [--btn-border:theme(colors.zinc.950/10%)] [--btn-hover-overlay:theme(colors.zinc.950/2.5%)] data-[active]:[--btn-border:theme(colors.zinc.950/15%)] data-[hover]:[--btn-border:theme(colors.zinc.950/15%)]","dark:[--btn-hover-overlay:theme(colors.zinc.950/5%)]","[--btn-icon:theme(colors.zinc.400)] data-[active]:[--btn-icon:theme(colors.zinc.500)] data-[hover]:[--btn-icon:theme(colors.zinc.500)]"],zinc:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.zinc.600)] [--btn-border:theme(colors.zinc.700/90%)]","dark:[--btn-hover-overlay:theme(colors.white/5%)]","[--btn-icon:theme(colors.zinc.400)] data-[active]:[--btn-icon:theme(colors.zinc.300)] data-[hover]:[--btn-icon:theme(colors.zinc.300)]"],indigo:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.indigo.500)] [--btn-border:theme(colors.indigo.600/90%)]","[--btn-icon:theme(colors.indigo.300)] data-[active]:[--btn-icon:theme(colors.indigo.200)] data-[hover]:[--btn-icon:theme(colors.indigo.200)]"],cyan:["text-cyan-950 [--btn-bg:theme(colors.cyan.300)] [--btn-border:theme(colors.cyan.400/80%)] [--btn-hover-overlay:theme(colors.white/25%)]","[--btn-icon:theme(colors.cyan.500)]"],red:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.red.600)] [--btn-border:theme(colors.red.700/90%)]","[--btn-icon:theme(colors.red.300)] data-[active]:[--btn-icon:theme(colors.red.200)] data-[hover]:[--btn-icon:theme(colors.red.200)]"],orange:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.orange.500)] [--btn-border:theme(colors.orange.600/90%)]","[--btn-icon:theme(colors.orange.300)] data-[active]:[--btn-icon:theme(colors.orange.200)] data-[hover]:[--btn-icon:theme(colors.orange.200)]"],amber:["text-amber-950 [--btn-hover-overlay:theme(colors.white/25%)] [--btn-bg:theme(colors.amber.400)] [--btn-border:theme(colors.amber.500/80%)]","[--btn-icon:theme(colors.amber.600)]"],yellow:["text-yellow-950 [--btn-hover-overlay:theme(colors.white/25%)] [--btn-bg:theme(colors.yellow.300)] [--btn-border:theme(colors.yellow.400/80%)]","[--btn-icon:theme(colors.yellow.600)] data-[active]:[--btn-icon:theme(colors.yellow.700)] data-[hover]:[--btn-icon:theme(colors.yellow.700)]"],lime:["text-lime-950 [--btn-hover-overlay:theme(colors.white/25%)] [--btn-bg:theme(colors.lime.300)] [--btn-border:theme(colors.lime.400/80%)]","[--btn-icon:theme(colors.lime.600)] data-[active]:[--btn-icon:theme(colors.lime.700)] data-[hover]:[--btn-icon:theme(colors.lime.700)]"],green:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.green.600)] [--btn-border:theme(colors.green.700/90%)]","[--btn-icon:theme(colors.white/60%)] data-[active]:[--btn-icon:theme(colors.white/80%)] data-[hover]:[--btn-icon:theme(colors.white/80%)]"],emerald:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.emerald.600)] [--btn-border:theme(colors.emerald.700/90%)]","[--btn-icon:theme(colors.white/60%)] data-[active]:[--btn-icon:theme(colors.white/80%)] data-[hover]:[--btn-icon:theme(colors.white/80%)]"],teal:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.teal.600)] [--btn-border:theme(colors.teal.700/90%)]","[--btn-icon:theme(colors.white/60%)] data-[active]:[--btn-icon:theme(colors.white/80%)] data-[hover]:[--btn-icon:theme(colors.white/80%)]"],sky:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.sky.500)] [--btn-border:theme(colors.sky.600/80%)]","[--btn-icon:theme(colors.white/60%)] data-[active]:[--btn-icon:theme(colors.white/80%)] data-[hover]:[--btn-icon:theme(colors.white/80%)]"],blue:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.blue.600)] [--btn-border:theme(colors.blue.700/90%)]","[--btn-icon:theme(colors.blue.400)] data-[active]:[--btn-icon:theme(colors.blue.300)] data-[hover]:[--btn-icon:theme(colors.blue.300)]"],violet:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.violet.500)] [--btn-border:theme(colors.violet.600/90%)]","[--btn-icon:theme(colors.violet.300)] data-[active]:[--btn-icon:theme(colors.violet.200)] data-[hover]:[--btn-icon:theme(colors.violet.200)]"],purple:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.purple.500)] [--btn-border:theme(colors.purple.600/90%)]","[--btn-icon:theme(colors.purple.300)] data-[active]:[--btn-icon:theme(colors.purple.200)] data-[hover]:[--btn-icon:theme(colors.purple.200)]"],fuchsia:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.fuchsia.500)] [--btn-border:theme(colors.fuchsia.600/90%)]","[--btn-icon:theme(colors.fuchsia.300)] data-[active]:[--btn-icon:theme(colors.fuchsia.200)] data-[hover]:[--btn-icon:theme(colors.fuchsia.200)]"],pink:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.pink.500)] [--btn-border:theme(colors.pink.600/90%)]","[--btn-icon:theme(colors.pink.300)] data-[active]:[--btn-icon:theme(colors.pink.200)] data-[hover]:[--btn-icon:theme(colors.pink.200)]"],rose:["text-white [--btn-hover-overlay:theme(colors.white/10%)] [--btn-bg:theme(colors.rose.500)] [--btn-border:theme(colors.rose.600/90%)]","[--btn-icon:theme(colors.rose.300)] data-[active]:[--btn-icon:theme(colors.rose.200)] data-[hover]:[--btn-icon:theme(colors.rose.200)]"]}},z=(0,r.forwardRef)(function(e,t){let{color:o,outline:r,plain:n,className:c,children:i,...l}=e,s=(0,f.Z)(c,y.base,r?y.outline:n?y.plain:(0,f.Z)(y.solid,y.colors[null!=o?o:"dark/zinc"]));return"href"in l?(0,a.jsx)(x,{...l,className:s,ref:t,children:(0,a.jsx)(k,{children:i})}):(0,a.jsx)(u.z,{...l,className:(0,f.Z)(s,"cursor-default"),ref:t,children:(0,a.jsx)(k,{children:i})})});function k(e){let{children:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"absolute left-1/2 top-1/2 size-[max(100%,2.75rem)] -translate-x-1/2 -translate-y-1/2 [@media(pointer:fine)]:hidden","aria-hidden":"true"}),t]})}function _(e){let{className:t,...o}=e;return(0,a.jsx)("nav",{...o,className:(0,f.Z)(t,"flex h-full min-h-0 flex-col")})}function j(e){let{className:t,...o}=e;return(0,a.jsx)("div",{...o,className:(0,f.Z)(t,"flex flex-col border-b border-zinc-950/5 p-4 dark:border-white/5 [&>[data-slot=section]+[data-slot=section]]:mt-2.5")})}function N(e){let{className:t,...o}=e;return(0,a.jsx)("div",{...o,className:(0,f.Z)(t,"flex flex-1 flex-col overflow-y-auto p-4 [&>[data-slot=section]+[data-slot=section]]:mt-8")})}function Z(e){let{className:t,...o}=e,n=(0,r.useId)();return(0,a.jsx)(v.S,{id:n,children:(0,a.jsx)("div",{...o,"data-slot":"section",className:(0,f.Z)(t,"flex flex-col gap-0.5")})})}function S(e){let{className:t,...o}=e;return(0,a.jsx)("h3",{...o,className:(0,f.Z)(t,"mb-1 px-2 text-xs/6 font-medium text-zinc-500 dark:text-zinc-400")})}let F=(0,r.forwardRef)(function(e,t){let{current:o,className:n,children:c,...i}=e,l=(0,f.Z)("flex w-full items-center gap-3 rounded-lg px-2 py-2.5 text-left text-base/6 font-medium text-zinc-950 sm:py-2 sm:text-sm/5","data-[slot=icon]:*:size-6 data-[slot=icon]:*:shrink-0 data-[slot=icon]:*:fill-zinc-500 sm:data-[slot=icon]:*:size-5","data-[slot=icon]:last:*:ml-auto data-[slot=icon]:last:*:size-5 sm:data-[slot=icon]:last:*:size-4","data-[slot=avatar]:*:-m-0.5 data-[slot=avatar]:*:size-7 data-[slot=avatar]:*:[--ring-opacity:10%] sm:data-[slot=avatar]:*:size-6","data-[hover]:bg-zinc-950/5 data-[slot=icon]:*:data-[hover]:fill-zinc-950","data-[active]:bg-zinc-950/5 data-[slot=icon]:*:data-[active]:fill-zinc-950","data-[slot=icon]:*:data-[current]:fill-zinc-950","dark:text-white dark:data-[slot=icon]:*:fill-zinc-400","dark:data-[hover]:bg-white/5 dark:data-[slot=icon]:*:data-[hover]:fill-white","dark:data-[active]:bg-white/5 dark:data-[slot=icon]:*:data-[active]:fill-white","dark:data-[slot=icon]:*:data-[current]:fill-white");return(0,a.jsxs)("span",{className:(0,f.Z)(n,"relative"),children:[o&&(0,a.jsx)(w.E.span,{layoutId:"current-indicator",className:"absolute inset-y-2 -left-4 w-0.5 rounded-full bg-zinc-950 dark:bg-white"}),"href"in i?(0,a.jsx)(m.P,{as:r.Fragment,ref:t,children:(0,a.jsx)(x,{className:l,...i,"data-current":o?"true":void 0,children:(0,a.jsx)(k,{children:c})})}):(0,a.jsx)(u.z,{...i,className:(0,f.Z)("cursor-default",l),"data-current":o?"true":void 0,ref:t,children:(0,a.jsx)(k,{children:c})})]})});var E=o(98859),A=o(74330),P=o(52071);let C=(0,n.default)(()=>Promise.all([o.e(231),o.e(899)]).then(o.bind(o,76899)),{loadableGenerated:{webpack:()=>[76899]},ssr:!1}),O=(0,n.default)(()=>Promise.all([o.e(401),o.e(118),o.e(392)]).then(o.bind(o,8392)),{loadableGenerated:{webpack:()=>[8392]},ssr:!1}),U=e=>e.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),I=e=>e.reduce((e,t)=>{let o=(0,E.D)(t.date),a="一周外";return(0,A.z)(o)?a="今天":(0,P.m)(o,{weekStartsOn:1})&&(a="一周内"),e[a]||(e[a]=[]),e[a].push(t),e},{});var R=()=>{let[e,t]=(0,r.useState)(null),[o,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)([]),[s,m]=(0,r.useState)(25),[u,f]=(0,r.useState)(null),v=e=>{if("object"==typeof e&&null!==e)return e;try{let t=JSON.parse(e);if("object"==typeof t&&null!==t)return t}catch(e){console.error("Invalid JSON string provided, using empty object as fallback.",e)}return{}},w=(0,r.useCallback)(e=>{console.log("Received SSE message:",e),t(t=>{if(!t)return null;let o={...t};return"chat_history"===e.type?o.chat_history=e.chat_history:"plan"===e.type?o.current_plan=v(e.plan):"code"===e.type?o.step_codes=e.step_codes:"chat_list"===e.type&&l(U(e.chat_list)),console.log("Updated session data:",o),o})},[]);(0,r.useEffect)(()=>{(async()=>{try{let[e,o]=await Promise.all([(0,c.Gg)(),(0,c.Ag)()]);if(console.log("Fetched session data:",e),t(e),Array.isArray(o))l(U(o));else if("object"==typeof o&&null!==o){let e=Object.values(o).find(Array.isArray);if(e)l(U(e));else throw Error("Chat list data is not in the expected format")}else throw Error("Unexpected data format for chat list");let a=(0,c._I)(e.session_id);return a.onmessage=e=>{let t=JSON.parse(e.data);w(t)},a.onerror=e=>{console.error("EventSource failed:",e),a.close()},()=>{a.close()}}catch(e){console.error("Failed to fetch data:",e),f("Failed to load initial data. Please refresh the page.")}finally{n(!1)}})()},[w]),(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,c.Ag)();if(console.log("Fetched chat list:",e),Array.isArray(e))l(U(e));else if("object"==typeof e&&null!==e){let t=Object.values(e).find(Array.isArray);if(t)l(U(t));else throw Error("Chat list data is not in the expected format")}else throw Error("Unexpected data format for chat list")}catch(e){console.error("Failed to fetch chat list:",e),f("Failed to load chat list. Please try again later.")}})()},[]);let g=(0,r.useCallback)(async o=>{if(e){console.log("Updating plan with:",o);try{await (0,c.F9)(e.session_id,o),t(e=>{let t={...e,current_plan:o};return console.log("Updated session data after plan update:",t),t})}catch(e){console.error("Failed to update plan:",e)}}},[e]),p=(0,r.useCallback)(async(o,a)=>{if(e){console.log("Updating code for step ".concat(o,":"),a);try{let r={...e.step_codes,[o]:a};await (0,c.IX)(r),t(e=>{let t={...e,step_codes:r};return console.log("Updated session data after code update:",t),t})}catch(e){console.error("Failed to update code:",e)}}},[e]),x=async()=>{try{n(!0);let e=await (0,c.PO)();console.log("New chat list:",e),l(e);let o=e[0];t(e=>({...e,chat_list_id:o.chat_list_id,chat_history:[],current_plan:{},step_codes:{}})),l(U(e))}catch(e){console.error("Failed to create new chat:",e),f("Failed to create new plan. Please try again.")}finally{n(!1)}},y=async e=>{n(!0),f(null);try{let o=await (0,c.kY)(e);console.log("Changed to chat:",o),t(e=>({...e,...o}))}catch(e){console.error("Failed to change chat:",e),f("Failed to switch to the selected chat. Please try again.")}finally{n(!1)}},k=async t=>{try{n(!0);let o=await (0,c.GO)(t);if(console.log("Delete chat result:",o),o.status){if(l(e=>e.filter(e=>e.chat_list_id!==t)),(null==e?void 0:e.chat_list_id)===t){let e=i[0];e?await y(e.chat_list_id):await x()}l(e=>U(e.filter(e=>e.chat_list_id!==t)))}else throw Error("Failed to delete chat")}catch(e){console.error("Failed to delete chat:",e),f("Failed to delete the chat. Please try again.")}finally{n(!1)}};return o?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen bg-background text-foreground",children:"Loading..."}):u?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen bg-background text-foreground",children:u}):e?(0,a.jsxs)(d,{direction:"horizontal",className:"h-screen w-full bg-background text-foreground overflow-hidden",children:[(0,a.jsx)(h,{defaultSize:20,minSize:15,children:(0,a.jsxs)(_,{className:"h-full",children:[(0,a.jsx)(j,{children:(0,a.jsx)(z,{onClick:x,className:"w-full",disabled:o,children:o?"Creating...":"新计划"})}),(0,a.jsx)(N,{children:i.length>0?Object.entries(I(i)).map(e=>{let[t,r]=e;return(0,a.jsxs)(Z,{children:[(0,a.jsx)(S,{children:t}),r.map(e=>(0,a.jsxs)(F,{children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)("div",{children:[(0,a.jsx)(z,{plain:!0,onClick:()=>y(e.chat_list_id),disabled:o,children:"继续"}),(0,a.jsx)(z,{plain:!0,onClick:()=>k(e.chat_list_id),disabled:o,children:"删除"})]})]},e.chat_list_id))]},t)}):(0,a.jsx)("div",{className:"p-4 text-center text-gray-500",children:"暂无聊天记录"})})]})}),(0,a.jsx)(b,{}),(0,a.jsx)(h,{defaultSize:40,minSize:30,children:(0,a.jsx)("div",{className:"h-full overflow-hidden",children:(0,a.jsx)(C,{initialMessages:e.chat_history,currentPlan:e.current_plan})})}),(0,a.jsx)(b,{}),(0,a.jsx)(h,{defaultSize:40,minSize:30,children:(0,a.jsx)("div",{className:"h-full overflow-hidden",children:(0,a.jsx)(O,{currentPlan:e.current_plan,stepCodes:e.step_codes,onPlanUpdate:g,onCodeUpdate:p})})})]}):(0,a.jsx)("div",{className:"flex justify-center items-center h-screen bg-background text-foreground",children:"No session data available."})}},92800:function(e,t,o){"use strict";o.d(t,{Ag:function(){return g},F9:function(){return f},GO:function(){return y},Gg:function(){return h},IX:function(){return v},MQ:function(){return d},PO:function(){return p},_I:function(){return u},bE:function(){return b},cE:function(){return m},ef:function(){return w},kY:function(){return x}});var a=o(38472),r=o(44785);let n="/api",c="session_id",i=e=>{r.Z.set(c,e,{expires:7})},l=()=>r.Z.get(c)||"",s=async()=>{let e=await a.Z.post("".concat(n,"/sessions"));return i(e.data.session_id),e.data},d=async()=>{let e=l();return e||i(e=(await s()).session_id),e},h=async()=>{let e=await d();return(await a.Z.get("".concat(n,"/sessions/").concat(e))).data},b=async e=>{let t=await d();return(await a.Z.post("".concat(n,"/schat"),{session_id:t,message:e})).data.session_id},m=e=>new EventSource("".concat(n,"/chat-stream?session_id=").concat(e)),u=e=>new EventSource("".concat(n,"/sse?session_id=").concat(e)),f=async(e,t)=>(await a.Z.put("".concat(n,"/sessions/").concat(e,"/current_plan"),t,{headers:{"Content-Type":"application/json"}})).data,v=async e=>{let t=await d();return(await a.Z.put("".concat(n,"/sessions/").concat(t,"/step_codes"),e)).data},w=async e=>{let t=await d();return(await a.Z.post("".concat(n,"/save_plan"),{session_id:t,plan:e})).data},g=async()=>{let e=await d(),t=await a.Z.get("".concat(n,"/get_chat_list"),{params:{session_id:e}});if(Array.isArray(t.data))return t.data;if("object"==typeof t.data&&null!==t.data){let e=Object.values(t.data).find(Array.isArray);if(e)return e}return console.error("Unexpected data format from API:",t.data),[]},p=async()=>{let e=await d();try{return(await a.Z.get("".concat(n,"/new_chat"),{params:{session_id:e}})).data}catch(e){throw console.error("Error creating new chat:",e),e}},x=async e=>{let t=await d();return(await a.Z.get("".concat(n,"/change_chat"),{params:{session_id:t,chat_list_id:e}})).data},y=async e=>{let t=await d();return(await a.Z.delete("".concat(n,"/delete_chat"),{params:{session_id:t,chat_list_id:e}})).data}},49354:function(e,t,o){"use strict";o.d(t,{cn:function(){return n}});var a=o(44839),r=o(96164);function n(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,r.m6)((0,a.W)(t))}},71918:function(){}},function(e){e.O(0,[725,502,987,971,23,744],function(){return e(e.s=3274)}),_N_E=e.O()}]);